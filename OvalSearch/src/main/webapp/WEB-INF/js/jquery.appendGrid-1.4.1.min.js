/*!
* jQuery appendGrid v1.4.1
* https://appendgrid.apphb.com/
*
* Copyright 2014 Albert L.
* Dual licensed under the LGPL (http://www.gnu.org/licenses/lgpl.html)
* and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.
*
* Depends:
* jQuery v1.9.1+
* jquery UI v1.10.2+
*/
(function(g){var r={caption:null,initRows:3,initData:null,columns:null,i18n:null,idPrefix:null,rowDragging:false,hideButtons:null,hideRowNumColumn:false,rowButtonsInFront:false,buttonClasses:null,customGridButtons:null,customRowButtons:null,customFooterButtons:null,nameFormatter:null,dataLoaded:null,afterRowAppended:null,afterRowInserted:null,afterRowSwapped:null,beforeRowRemove:null,afterRowRemoved:null,afterRowDragged:null};var w={type:"text",name:null,value:null,display:null,displayCss:null,headerSpan:1,cellCss:null,ctrlAttr:null,ctrlProp:null,ctrlCss:null,ctrlClass:null,ctrlOptions:null,uiOption:null,uiTooltip:null,resizable:false,invisible:false,customBuilder:null,customGetter:null,customSetter:null,onClick:null,onChange:null};var s={noColumnInfo:"Cannot initial grid without column information!",elemNotTable:"Cannot initial grid on element other than TABLE!",notInit:"`appendGrid` does not initialized",getValueMultiGrid:"Cannot get values on multiple grid",notSupportMethod:"Method is not supported by `appendGrid`: "};var u={append:"Append Row",removeLast:"Remove Last Row",insert:"Insert Row Above",remove:"Remove Current Row",moveUp:"Move Up",moveDown:"Move Down",rowDrag:"Sort Row",rowEmpty:"This Grid Is Empty"};var l={append:null,removeLast:null,insert:null,remove:null,moveUp:null,moveDown:null,rowDrag:null};var f={append:false,removeLast:false,insert:false,remove:false,moveUp:false,moveDown:false};var k={init:function(E){var S=this;if(S.length>0){if(!g.isArray(E.columns)||E.columns.length==0){alert(s.noColumnInfo);return S}var N=S[0],F,J,R,P,B;if(n(N.tagName)||N.tagName!="TABLE"){alert(s.elemNotTable);return S}var Q=g.extend({},r,E);g.extend(Q,{_uniqueIndex:0,_rowOrder:[],_isDataLoaded:false,_visibleCount:0,_finalColSpan:0,_hideLastColumn:false});if(g.isPlainObject(E.i18n)){Q._i18n=g.extend({},u,E.i18n)}else{Q._i18n=g.extend({},u)}if(g.isPlainObject(E.buttonClasses)){Q._buttonClasses=g.extend({},l,E.buttonClasses)}else{Q._buttonClasses=g.extend({},l)}if(g.isPlainObject(E.hideButtons)){Q.hideButtons=g.extend({},f,E.hideButtons)}else{Q.hideButtons=g.extend({},f)}if(n(Q.idPrefix)){if(n(N.id)||N.id==""){Q.idPrefix="ag"+new Date().getTime()}else{Q.idPrefix=N.id}}if(!g.isPlainObject(Q.customGridButtons)){Q.customGridButtons={}}F=document.createElement("thead");F.className="ui-widget-header";J=document.createElement("tbody");J.className="ui-widget-content";R=document.createElement("tfoot");R.className="ui-widget-header";g(N).empty().addClass("appendGrid ui-widget").append(F,J,R);var C,M;P=F.insertRow(-1);if(!Q.hideRowNumColumn){C=P.insertCell(-1);C.className="ui-widget-header"}var G=0;for(var H=0;H<Q.columns.length;H++){var L=g.extend({},w,Q.columns[H]);Q.columns[H]=L;if(Q.columns[H].type!="hidden"){if(!Q.columns[H].invisible){Q._visibleCount++}if(G==0){var D="ui-widget-header";if(Q.columns[H].invisible){D+=" invisible"}if(Q.columns[H].resizable){D+=" resizable"}B=P.insertCell(-1);B.id=Q.idPrefix+"_"+Q.columns[H].name+"_td_head";B.className=D;g(B).text(Q.columns[H].display);if(Q.columns[H].displayCss){g(B).css(Q.columns[H].displayCss)}if(Q.columns[H].headerSpan>1){g(B).attr("colSpan",Q.columns[H].headerSpan);G=Q.columns[H].headerSpan-1}}else{G--}}}g("td.resizable",F).resizable({handles:"e"});if(Q.hideButtons.insert&&Q.hideButtons.remove&&Q.hideButtons.moveUp&&Q.hideButtons.moveDown&&(!g.isArray(Q.customRowButtons)||Q.customRowButtons.length==0)){Q._hideLastColumn=true}Q._finalColSpan=Q._visibleCount;if(!Q.hideRowNumColumn){Q._finalColSpan++}if(!Q._hideLastColumn){Q._finalColSpan++}if(!Q._hideLastColumn){if(Q.rowButtonsInFront){if(Q.hideRowNumColumn){M=P.insertCell(0)}else{C.colSpan=2;M=C}}else{M=P.insertCell(-1)}M.className="ui-widget-header"}if(Q.caption){P=F.insertRow(0);B=P.insertCell(-1);B.id=Q.idPrefix+"_caption_td";B.className="ui-state-active caption";B.colSpan=Q._finalColSpan;g(B).text(Q.caption)}P=R.insertRow(-1);B=P.insertCell(-1);B.id=Q.idPrefix+"_footer_td";B.colSpan=Q._finalColSpan;g("<input/>").attr({type:"hidden",id:Q.idPrefix+"_rowOrder",name:Q.idPrefix+"_rowOrder"}).appendTo(B);if(Q.hideButtons.append&&Q.hideButtons.removeLast&&(!g.isArray(Q.customFooterButtons)||Q.customFooterButtons.length==0)){P.style.display="none"}else{if(!Q.hideButtons.append){m(Q.customGridButtons.append,"ui-icon-plusthick").attr({title:Q._i18n.append}).addClass("append",Q._buttonClasses.append).click(function(T){d(N,1,null,null);if(T&&T.preventDefault){T.preventDefault()}return false}).appendTo(B)}if(!Q.hideButtons.removeLast){m(Q.customGridButtons.removeLast,"ui-icon-closethick").attr({title:Q._i18n.removeLast}).addClass("removeLast",Q._buttonClasses.removeLast).click(function(T){j(N,null,this.value,false);if(T&&T.preventDefault){T.preventDefault()}return false}).appendTo(B)}if(Q.customFooterButtons&&Q.customFooterButtons.length){for(var K=Q.customFooterButtons.length-1;K>=0;K--){var O=Q.customFooterButtons[K];if(O&&O.uiButton&&O.click&&O.atTheFront){g(B).prepend(q(N,O))}}for(var K=0;K<Q.customFooterButtons.length;K++){var O=Q.customFooterButtons[K];if(O&&O.uiButton&&O.click&&!O.atTheFront){g(B).append(q(N,O))}}}}if(Q.rowDragging){g(J).sortable({axis:"y",containment:N,handle:".rowDrag",helper:function(V,U){var W=U.children();var T=U.clone();T.children().each(function(Y){g(this).width(W.eq(Y).width());var X=g("select",this);if(X.length>0){for(var aa=0;aa<X.length;aa++){var Z=W.eq(Y).find("select");if(Z.length>aa){X[aa].value=Z[aa].value}}}});return T},update:function(V,W){var T=W.item[0].id.substring(W.item[0].id.lastIndexOf("_")+1);var U=W.item[0].rowIndex-g("tr",F).length;p(N,W.originalPosition.top>W.position.top,T,U)}})}g(N).data("appendGrid",Q);if(g.isArray(E.initData)){a(N,E.initData,true)}else{g(N).appendGrid("appendRow",Q.initRows)}if(Q._rowOrder.length==0){var I=g("<td></td>").text(Q._i18n.rowEmpty).attr("colspan",Q._finalColSpan);g("tbody",N).append(g("<tr></tr>").addClass("empty").append(I))}}return S},isReady:function(){var B=e(this,true);if(B){return true}return false},isDataLoaded:function(){var B=e(this);if(B){return B._isDataLoaded}return false},load:function(B){var C=e(this),D=this;if(C){if(B!=null&&B.length>0){a(D[0],B,false)}else{y(D[0])}}return D},appendRow:function(B){return this.appendGrid("insertRow",B)},insertRow:function(E,G,C){var F=e(this);if(F){if((g.isArray(E)&&E.length>0)||(g.isNumeric(E)&&E>0)){var B=this[0];insertResult=d(B,E,G,C);if(g.isNumeric(G)||g.isNumeric(C)){t(B,insertResult.rowIndex);var D=F._rowOrder[insertResult.addedRows[0]];g("#"+F.idPrefix+"_Insert_"+D,B).focus()}}}return this},removeRow:function(D,B){var C=e(this);if(C&&C._rowOrder.length>0){j(this[0],D,B,true)}return this},emptyGrid:function(){var B=e(this);if(B){y(this[0])}return target},moveUpRow:function(H,G){var C=e(this),F=this;if(C){var E=F[0],J,B,D,I=null;var K=E.getElementsByTagName("tbody")[0];if(g.isNumeric(H)&&H>0&&H<C._rowOrder.length){I=H;G=C._rowOrder[H];J=document.getElementById(C.idPrefix+"_Row_"+G,E)}else{if(g.isNumeric(G)){I=h(G,C);J=document.getElementById(C.idPrefix+"_Row_"+G,E)}}if(I!=null&&I>0){B=document.getElementById(C.idPrefix+"_Row_"+C._rowOrder[I-1],E);K.removeChild(J);K.insertBefore(J,B);C._rowOrder[I]=C._rowOrder[I-1];C._rowOrder[I-1]=G;D=g("td.first",B).html();g("td.first",B).html(g("td.first",J).html());g("td.first",J).html(D);b(E,C);g("td.last button.moveUp",J).removeClass("ui-state-hover").blur();g("td.last button.moveUp",B).focus();if(C.afterRowSwapped){C.afterRowSwapped(E,I,I-1)}}}return F},moveDownRow:function(H,G){var C=e(this),F=this;if(C){var E=F[0],J,B,D,I=null;var K=E.getElementsByTagName("tbody")[0];if(g.isNumeric(H)&&H>=0&&H<C._rowOrder.length-1){I=H;G=C._rowOrder[H];J=document.getElementById(C.idPrefix+"_Row_"+G,E)}else{if(g.isNumeric(G)){I=h(G,C);J=document.getElementById(C.idPrefix+"_Row_"+G,E)}}if(I!=null&&I!=C._rowOrder.length-1){B=document.getElementById(C.idPrefix+"_Row_"+C._rowOrder[I+1],E);K.removeChild(B);K.insertBefore(B,J);C._rowOrder[I]=C._rowOrder[I+1];C._rowOrder[I+1]=G;D=g("td.first",B).html();g("td.first",B).html(g("td.first",J).html());g("td.first",J).html(D);b(E,C);g("td.last button.moveDown",J).removeClass("ui-state-hover").blur();g("td.last button.moveDown",B).focus();if(C.afterRowSwapped){C.afterRowSwapped(E,I,I+1)}}}return F},showColumn:function(E){var F=e(this);if(F&&E){var D=-1,C=this[0];for(var G=0;G<F.columns.length;G++){if(F.columns[G].name==E){D=G;break}}if(D!=-1&&F.columns[D].invisible){F._visibleCount++;F._finalColSpan++;g("#"+F.idPrefix+"_caption_td").attr("colSpan",F._finalColSpan);g("#"+F.idPrefix+"_footer_td").attr("colSpan",F._finalColSpan);g("#"+F.idPrefix+"_"+E+"_td_head").removeClass("invisible");for(var G=0;G<F._rowOrder.length;G++){var B=F._rowOrder[G];g("#"+F.idPrefix+"_"+E+"_td_"+B).removeClass("invisible")}F.columns[D].invisible=false;b(C,F)}}return this},hideColumn:function(E){var F=e(this);if(F&&E){var D=-1,C=this[0];for(var G=0;G<F.columns.length;G++){if(F.columns[G].name==E){D=G;break}}if(D!=-1&&!F.columns[D].invisible){F._visibleCount--;F._finalColSpan--;g("#"+F.idPrefix+"_caption_td").attr("colSpan",F._finalColSpan);g("#"+F.idPrefix+"_footer_td").attr("colSpan",F._finalColSpan);g("#"+F.idPrefix+"_"+E+"_td_head").addClass("invisible");for(var G=0;G<F._rowOrder.length;G++){var B=F._rowOrder[G];g("#"+F.idPrefix+"_"+E+"_td_"+B).addClass("invisible")}F.columns[D].invisible=true;b(C,F)}}return this},isColumnInvisible:function(B){var C=e(this);if(C&&B){for(var D=0;D<C.columns.length;D++){if(C.columns[D].name==B){return C.columns[D].invisible}}}return null},getRowCount:function(){var B=e(this);if(B){return B._rowOrder.length}return null},getUniqueIndex:function(C){var B=e(this);if(B&&g.isNumeric(C)&&C<B._rowOrder.length){return B._rowOrder[C]}return null},getRowIndex:function(B){var C=e(this);if(C&&g.isNumeric(B)){for(var D=0;D<C._rowOrder.length;D++){if(C._rowOrder[D]==B){return D}}}return null},getRowValue:function(F,C,E){var D=e(this),B=null;if(D){if(g.isNumeric(F)&&F>=0&&F<D._rowOrder.length){C=D._rowOrder[F]}if(!n(C)){B=i(D,C,E)}}return B},getAllValue:function(D){var C=e(this),B=null;if(C){B=D?{}:[];for(var E=0;E<C._rowOrder.length;E++){if(D){rowValue=i(C,C._rowOrder[E],E);g.extend(B,rowValue)}else{rowValue=i(C,C._rowOrder[E]);B.push(rowValue)}}if(D){B._RowCount=C._rowOrder.length}}return B},getCtrlValue:function(B,E){var C=e(this);if(C&&E>=0&&E<C._rowOrder.length){for(var D=0;D<C.columns.length;D++){if(C.columns[D].name===B){return c(C,D,C._rowOrder[E])}}}return null},setCtrlValue:function(B,F,D){var C=e(this);if(C&&F>=0&&F<C._rowOrder.length){for(var E=0;E<C.columns.length;E++){if(C.columns[E].name==B){o(C,E,C._rowOrder[F],D);break}}}return this},getCellCtrl:function(C,F){var D=e(this);if(D&&F>=0&&F<D._rowOrder.length){var B=D._rowOrder[F];for(var E=0;E<D.columns.length;E++){if(D.columns[E].name===C){return v(D.columns[E].type,D.idPrefix,C,B)}}}return null},getCellCtrlByUniqueIndex:function(C,B){var D=e(this);if(D){for(var E=0;E<D.columns.length;E++){if(D.columns[E].name===C){return v(D.columns[E].type,D.idPrefix,C,B)}}}return null},getRowOrder:function(){var B=e(this);if(B){return B._rowOrder.slice()}return null},getColumns:function(){var B=e(this);if(B){return B.columns.slice()}return null}};function e(C,B){var D=null;if(C.length==1){D=C.data("appendGrid");if(!D&&!B){alert(s.notInit)}}else{if(!B){alert(s.getValueMultiGrid)}}return D}function d(S,J,R,O){var X=g(S).data("appendGrid");var W=[],E=null,F,P,U=[];var G=S.getElementsByTagName("thead")[0];var M=S.getElementsByTagName("tbody")[0];var I=J,B=false;if(g.isArray(J)){I=J.length;B=true}if(g.isNumeric(O)){for(var L=0;L<X._rowOrder.length;L++){if(X._rowOrder[L]==O){R=L;if(L!=0){E=L-1}break}}}else{if(g.isNumeric(R)){if(R>=X._rowOrder.length){R=null}else{E=R-1}}else{if(X._rowOrder.length!=0){R=null;E=X._rowOrder.length-1}}}if(X._rowOrder.length==0){g("tr.empty",S).remove()}for(var L=0;L<I;L++){X._uniqueIndex++;F=X._uniqueIndex;U.length=0;if(g.isNumeric(R)){X._rowOrder.splice(R,0,F);tbRow=M.insertRow(R);W.push(R)}else{X._rowOrder.push(F);tbRow=M.insertRow(-1);W.push(X._rowOrder.length-1)}tbRow.id=X.idPrefix+"_Row_"+F;g(tbRow).data("appendGrid",F);if(!X.hideRowNumColumn){tbCell=tbRow.insertCell(-1);g(tbCell).addClass("ui-widget-content first").text(X._rowOrder.length)}for(var N=0;N<X.columns.length;N++){if(X.columns[N].type=="hidden"){U.push(N);continue}var D="ui-widget-content";if(X.columns[N].invisible){D+=" invisible"}tbCell=tbRow.insertCell(-1);tbCell.id=X.idPrefix+"_"+X.columns[N].name+"_td_"+F;tbCell.className=D;if(X.columns[N].cellCss!=null){g(tbCell).css(X.columns[N].cellCss)}var C=X.idPrefix+"_"+X.columns[N].name+"_"+F,K;if(typeof(X.nameFormatter)=="function"){K=X.nameFormatter(X.idPrefix,X.columns[N].name,F)}else{K=C}P=null;if(X.columns[N].type=="custom"){if(typeof(X.columns[N].customBuilder)=="function"){P=X.columns[N].customBuilder(tbCell,X.idPrefix,X.columns[N].name,F)}}else{if(X.columns[N].type=="select"){P=document.createElement("select");P.id=C;P.name=K;if(g.isArray(X.columns[N].ctrlOptions)){if(X.columns[N].ctrlOptions.length>0){if(g.isPlainObject(X.columns[N].ctrlOptions[0])){for(var Q=0;Q<X.columns[N].ctrlOptions.length;Q++){P.options[P.options.length]=new Option(X.columns[N].ctrlOptions[Q].label,X.columns[N].ctrlOptions[Q].value)}}else{for(var Q=0;Q<X.columns[N].ctrlOptions.length;Q++){P.options[P.options.length]=new Option(X.columns[N].ctrlOptions[Q],X.columns[N].ctrlOptions[Q])}}}}else{if(g.isPlainObject(X.columns[N].ctrlOptions)){for(var Q in X.columns[N].ctrlOptions){P.options[P.options.length]=new Option(X.columns[N].ctrlOptions[Q],Q)}}else{if(typeof(X.columns[N].ctrlOptions)=="string"){var V=X.columns[N].ctrlOptions.split(";");for(var Q=0;Q<V.length;Q++){var Y=V[Q].indexOf(":");if(-1==Y){P.options[P.options.length]=new Option(V[Q],V[Q])}else{P.options[P.options.length]=new Option(V[Q].substring(Y+1,V[Q].length),V[Q].substring(0,Y))}}}}}tbCell.appendChild(P)}else{if(X.columns[N].type=="checkbox"){P=document.createElement("input");P.type="checkbox";P.id=C;P.name=K;P.value=1;tbCell.appendChild(P);tbCell.style.textAlign="center"}else{if(X.columns[N].type=="textarea"){P=document.createElement("textarea");P.id=C;P.name=K;tbCell.appendChild(P)}else{if(-1!=X.columns[N].type.search(/^(color|date|datetime|datetime\-local|email|month|number|range|search|tel|time|url|week)$/)){P=document.createElement("input");try{P.type=X.columns[N].type}catch(H){}P.id=C;P.name=K;tbCell.appendChild(P)}else{P=document.createElement("input");P.type="text";P.id=C;P.name=K;tbCell.appendChild(P);if(X.columns[N].type=="ui-datepicker"){g(P).datepicker(X.columns[N].uiOption)}else{if(X.columns[N].type=="ui-spinner"){g(P).spinner(X.columns[N].uiOption)}else{if(X.columns[N].type=="ui-autocomplete"){g(P).autocomplete(X.columns[N].uiOption)}}}}}}}}if(X.columns[N].type!="custom"){if(X.columns[N].ctrlAttr!=null){g(P).attr(X.columns[N].ctrlAttr)}if(X.columns[N].ctrlProp!=null){g(P).prop(X.columns[N].ctrlProp)}if(X.columns[N].ctrlCss!=null){g(P).css(X.columns[N].ctrlCss)}if(X.columns[N].ctrlClass!=null){g(P).addClass(X.columns[N].ctrlClass)}if(X.columns[N].uiTooltip){g(P).tooltip(X.columns[N].uiTooltip)}if(typeof(X.columns[N].onClick)=="function"){g(P).click({caller:S,callback:X.columns[N].onClick,uniqueIndex:F},function(Z){Z.data.callback(Z,g(Z.data.caller).appendGrid("getRowIndex",Z.data.uniqueIndex))})}if(typeof(X.columns[N].onChange)=="function"){g(P).change({caller:S,callback:X.columns[N].onChange,uniqueIndex:F},function(Z){Z.data.callback(Z,g(Z.data.caller).appendGrid("getRowIndex",Z.data.uniqueIndex))})}}if(B){o(X,N,F,J[L][X.columns[N].name])}else{if(!n(X.columns[N].value)){o(X,N,F,X.columns[N].value)}}}if(!X._hideLastColumn||X.columns.length>X._visibleCount){if(!X.rowButtonsInFront){tbCell=tbRow.insertCell(-1)}else{if(!X.hideRowNumColumn){tbCell=tbRow.insertCell(1)}else{tbCell=tbRow.insertCell(0)}}tbCell.className="ui-widget-content last";if(X._hideLastColumn){tbCell.style.display="none"}if(!X.hideButtons.insert){m(X.customGridButtons.insert,"ui-icon-arrowreturnthick-1-w").attr({id:X.idPrefix+"_Insert_"+F,title:X._i18n.insert,tabindex:-1}).addClass("insert",X._buttonClasses.insert).data("appendGrid",{uniqueIndex:F}).click(function(aa){var Z=g(this).data("appendGrid").uniqueIndex;g(S).appendGrid("insertRow",1,null,Z);if(aa&&aa.preventDefault){aa.preventDefault()}return false}).appendTo(tbCell)}if(!X.hideButtons.remove){m(X.customGridButtons.remove,"ui-icon-trash").attr({id:X.idPrefix+"_Delete_"+F,title:X._i18n.remove,tabindex:-1}).addClass("remove",X._buttonClasses.remove).data("appendGrid",{uniqueIndex:F}).click(function(aa){var Z=g(this).data("appendGrid").uniqueIndex;j(S,null,Z,false);if(aa&&aa.preventDefault){aa.preventDefault()}return false}).appendTo(tbCell)}if(!X.hideButtons.moveUp){m(X.customGridButtons.moveUp,"ui-icon-arrowthick-1-n").attr({id:X.idPrefix+"_MoveUp_"+F,title:X._i18n.moveUp,tabindex:-1}).addClass("moveUp",X._buttonClasses.moveUp).data("appendGrid",{uniqueIndex:F}).click(function(aa){var Z=g(this).data("appendGrid").uniqueIndex;g(S).appendGrid("moveUpRow",null,Z);if(aa&&aa.preventDefault){aa.preventDefault()}return false}).appendTo(tbCell)}if(!X.hideButtons.moveDown){m(X.customGridButtons.moveDown,"ui-icon-arrowthick-1-s").attr({id:X.idPrefix+"_MoveDown_"+F,title:X._i18n.moveDown,tabindex:-1}).addClass("moveDown",X._buttonClasses.moveDown).data("appendGrid",{uniqueIndex:F}).click(function(aa){var Z=g(this).data("appendGrid").uniqueIndex;g(S).appendGrid("moveDownRow",null,Z);if(aa&&aa.preventDefault){aa.preventDefault()}return false}).appendTo(tbCell)}if(X.rowDragging){g("<div/>").addClass("rowDrag ui-state-default ui-corner-all",X._buttonClasses.rowDrag).attr("title",X._i18n.rowDrag).append(g("<div/>").addClass("ui-icon ui-icon-carat-2-n-s").append(g("<span/>").addClass("ui-button-text").text("Drag"))).appendTo(tbCell)}for(var N=0;N<U.length;N++){P=document.createElement("input");P.id=X.idPrefix+"_"+X.columns[U[N]].name+"_"+F;P.name=P.id;P.type="hidden";if(B){P.value=J[L][X.columns[U[N]].name]}else{if(!n(X.columns[U[N]].value)){P.value=X.columns[U[N]].value}}tbCell.appendChild(P)}if(X.customRowButtons&&X.customRowButtons.length){for(var N=X.customRowButtons.length-1;N>=0;N--){var T=X.customRowButtons[N];if(T&&T.uiButton&&T.click&&T.atTheFront){g(tbCell).prepend(x(S,T,F))}}for(var N=0;N<X.customRowButtons.length;N++){var T=X.customRowButtons[N];if(T&&T.uiButton&&T.click&&!T.atTheFront){g(tbCell).append(x(S,T,F))}}}}}b(S,X);if(g.isNumeric(R)){if(typeof(X.afterRowInserted)=="function"){X.afterRowInserted(S,E,W)}}else{if(typeof(X.afterRowAppended)=="function"){X.afterRowAppended(S,E,W)}}return{addedRows:W,parentIndex:E,rowIndex:R}}function q(B,D){var C=g("<button/>").attr({type:"button",tabindex:-1}).button(D.uiButton).click({tbWhole:B},D.click);if(D.btnClass){C.addClass(D.btnClass)}if(D.btnCss){C.css(D.btnCss)}if(D.btnAttr){C.attr(D.btnAttr)}return C}function x(C,E,B){var D=g("<button/>").val(B).attr({type:"button",tabindex:-1}).button(E.uiButton).click({tbWhole:C,uniqueIndex:B},function(F){var G=g(F.data.tbWhole).appendGrid("getRowValue",null,F.data.uniqueIndex);E.click(F,F.data.uniqueIndex,G)});if(E.btnClass){D.addClass(E.btnClass)}if(E.btnCss){D.css(E.btnCss)}if(E.btnAttr){D.attr(E.btnAttr)}return D}function j(C,I,B,F){var D=g(C).data("appendGrid");var H=C.getElementsByTagName("tbody")[0];if(g.isNumeric(B)){for(var G=0;G<D._rowOrder.length;G++){if(D._rowOrder[G]==B){I=G;break}}}if(g.isNumeric(I)){if(F||typeof(D.beforeRowRemove)!="function"||D.beforeRowRemove(C,I)){D._rowOrder.splice(I,1);H.deleteRow(I);b(C,D);t(C,I);if(typeof(D.afterRowRemoved)=="function"){D.afterRowRemoved(C,I)}}}else{if(F||typeof(D.beforeRowRemove)!="function"||D.beforeRowRemove(C,D._rowOrder.length-1)){B=D._rowOrder.pop();H.deleteRow(-1);b(C,D);if(typeof(D.afterRowRemoved)=="function"){D.afterRowRemoved(C,null)}}}if(D._rowOrder.length==0){var E=g("<td></td>").text(D._i18n.rowEmpty).attr("colspan",D._finalColSpan);g("tbody",C).append(g("<tr></tr>").addClass("empty").append(E))}}function y(B){var C=g(B).data("appendGrid");g("tbody",B).empty();C._rowOrder.length=0;C._uniqueIndex=0;b(B,C);if(C._rowOrder.length==0){var D=g("<td></td>").text(C._i18n.rowEmpty).attr("colspan",C._finalColSpan);g("tbody",B).append(g("<tr></tr>").addClass("empty").append(D))}}function t(B,E){var C=g(B).data("appendGrid");if(!C.hideRowNumColumn){for(var D=E;D<C._rowOrder.length;D++){g("#"+C.idPrefix+"_Row_"+C._rowOrder[D]+" td.first",B).text(D+1)}}}function a(H,D,G){var L,F,C,I,K;var E=g(H).data("appendGrid");if(E){L=H.getElementsByTagName("tbody")[0];g(L).empty();E._rowOrder.length=0;E._uniqueIndex=0;if(D!=null&&D.length){K=d(H,D.length,null,null);for(var B=0;B<K.addedRows.length;B++){for(var J=0;J<E.columns.length;J++){o(E,J,E._rowOrder[B],D[B][E.columns[J].name])}}}E._isDataLoaded=true;if(G){E.initData=null}g(H).data("appendGrid",E);if(typeof(E.dataLoaded)=="function"){E.dataLoaded(H)}}}function h(B,C){for(var D=0;D<C._rowOrder.length;D++){if(C._rowOrder[D]==B){return D}}return null}function n(B){return typeof(B)=="undefined"||B==null}function A(C,B){if(!n(C)&&g.isPlainObject(C)&&!n(C[B])){return C[B]}return null}function b(B,C){g(B).data("appendGrid",C);g("#"+C.idPrefix+"_rowOrder",B).val(C._rowOrder.join())}function z(C,B){var E=null;for(var D=0;D<C._rowOrder.length;D++){if(C._rowOrder[D]==B){return D}}return E}function i(E,C,G){var B={},D=null;for(var F=0;F<E.columns.length;F++){D=E.columns[F].name+(n(G)?"":"_"+G);B[D]=c(E,F,C)}return B}function c(F,D,B){var G=null,E=F.columns[D].type,C=F.columns[D].name;if(E=="checkbox"){G=v(E,F.idPrefix,C,B);if(G==null){return null}else{return G.checked?1:0}}else{if(E=="custom"){if(typeof(F.columns[D].customGetter)=="function"){return F.columns[D].customGetter(F.idPrefix,C,B)}else{return null}}else{G=v(E,F.idPrefix,C,B);if(G==null){return null}else{return G.value}}}}function v(D,E,C,B){return document.getElementById(E+"_"+C+"_"+B)}function o(F,D,B,G){var E=F.columns[D].type;var C=F.columns[D].name;if(E=="checkbox"){v(E,F.idPrefix,C,B).checked=(G!=null&&G!=0)}else{if(E=="custom"){if(typeof(F.columns[D].customSetter)=="function"){F.columns[D].customSetter(F.idPrefix,C,B,G)}}else{v(E,F.idPrefix,C,B).value=(G==null?"":G)}}}function p(C,H,B,D){var E=g(C).data("appendGrid");var G=-1;for(var F=0;F<E._rowOrder.length;F++){if(E._rowOrder[F]==B){if(H){G=D;E._rowOrder.splice(F,1);E._rowOrder.splice(D,0,B)}else{G=F;E._rowOrder.splice(D+1,0,B);E._rowOrder.splice(F,1)}break}}t(C,G);b(C,E);if(typeof(E.afterRowDragged)=="function"){E.afterRowDragged(C,D)}}function m(D,B){var C=null;if(D){if(typeof(D)=="function"){C=g(D())}else{if(D.nodeType){C=g(D).clone()}else{if(D.icons){C=g("<button/>").attr({type:"button"}).button(D)}}}}if(!C){C=g("<button/>").attr({type:"button"}).button({icons:{primary:B},text:false})}return C}g.fn.appendGrid=function(B){if(k[B]){return k[B].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof(B)==="object"||!B){return k.init.apply(this,arguments)}else{g.error(s.notSupportMethod+B)}}}})(jQuery);